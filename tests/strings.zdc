
#dynamic_link "libc.so.6";
// #dynamic_link "msvcrt.dll";

#foreign putchar :: (c: int) -> int;
#foreign getchar :: () -> int;
#foreign puts :: (string: *u8) -> int;

newline :: () -> void { putchar(10); }

print_digit :: (digit: int) -> void
{
    putchar(digit + 48);
    newline();
}

main :: () -> int
{
    return pointer_test();
}

pointer_test :: () -> void
{
    x: int = 3;

    print_digit(x);

    x_ptr : *int;
    x_ptr = *x;

    print_digit(<x_ptr);

    <x_ptr = 4;

    print_digit(x);

    c : u8 = 'c';
    putchar(c);
    newline();

    hello_zodiac := "Hello zodiac!";
    puts(hello_zodiac);
    putchar(hello_zodiac[1]);

    return <x_ptr;
}
